<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>expose</title>
  <style type="text/css">
  ul,
  li {
    list-style: none;
  }

  .container {
    max-width: 800px;
    margin: 0 auto;
  }

  .container:after {
    content: '';
    display: block;
    clear: both;
  }

  .container li {
    float: left;
    margin: 10px 10px;
  }

  .container li img {
    width: 320px;
    height: 180px;
  }

  p {
    float: left;
  }
  </style>
</head>

<body>
  <ul class="container">
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/3.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/4.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/1.jpg" alt=""></a></li>
    <li><a href="#"><img src="./img/blank.jpg" data-src="../carousel/img/2.jpg" alt=""></a></li>
    <p id="hello">hello</p>
    <p id="world">world</p>
  </ul>
  <script type="text/javascript" src="../carousel/js/jquery-2.1.1.min.js"></script>
  <script type="text/javascript">
  function Expose($target, callback) {
    this.$target = $target
    this.callback = callback
    this.bind()
    this.check()
  }
  Expose.prototype.bind = function() {
    var _this = this
    $(window).on('scroll', function() {
      _this.check()
    })
  }

  Expose.prototype.check = function() {
    if (this.isShow(this.$target)) {
      this.callback(this.$target)
    }
  }

  Expose.prototype.isShow = function() {
    var windowHeight = $(window).height(),
      scrollTop = $(window).scrollTop(),
      offsetTop = this.$target.offset().top,
      nodeHeight = this.$target.height()
    if (windowHeight + scrollTop > offsetTop && scrollTop < offsetTop + nodeHeight) {
      return true
    } else {
      return false
    }
  }

  var Lazy = (function() {
    return {
      init: function($target, callback) {
        $target.each(function(index, target) {
          new Expose($(target), callback)
        })
      }
    }
  })()

  Lazy.init($('#hello'), function($node) {
    $node.text($node.text() + '123')
  })
  Lazy.init($('#world'), function($node) {
    $node.text($node.text() + '456')
  })
  Lazy.init($('.container img'), function($node) {
    showImg($node)
  })

  function showImg($img) {
    var imgUrl = $img.attr('data-src')
    $img.attr('src', imgUrl)
  }
  </script>
</body>

</html>